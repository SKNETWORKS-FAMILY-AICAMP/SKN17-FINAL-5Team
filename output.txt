--- Starting Stateful Generation Test ---
Type of generate_trade_document: <class 'agents.tool.FunctionTool'>
Dir: ['__annotations__', '__class__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__match_args__', '__module__', '__ne__', '__new__', '__post_init__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'description', 'is_enabled', 'name', 'on_invoke_tool', 'params_json_schema', 'strict_json_schema', 'tool_input_guardrails', 'tool_output_guardrails']
Vars: {'name': 'generate_trade_document', 'description': 'Generates a trade document by filling a pre-defined HTML template with the provided data.\n\n    Args:\n        document_type: The type of document to generate. Must be one of:\n                       [\'Offer_Sheet\', \'PI\', \'Overseas_Distribution_Contract\', \n                        \'Commercial_Invoice\', \'PL\', \'BL\', \'Letter_of_Credit\']\n        data_json: A JSON string representing a dictionary where keys are placeholders in the template \n                   and values are the strings to replace them with.\n                   \n                   For \'Offer_Sheet\', valid keys are:\n                   - [ Date ], [ Ref No ], [ Buyer Name ], [ Seller Name ], [ Item No ], [ HS Code ], \n                   - [ Product Description ], [ Quantity ], [ Unit Price ], [ Amount ], [ Total Amount ], \n                   - [ Country of Origin ], [ Shipment ], [ Inspection ], [ Payment ], [ Validity ], [ Remarks ]\n                   \n                   * Note: For multiple items, combine them into a single string separated by \'\\n\' (newline).\n                     The tool will automatically convert \'\\n\' to \'<br>\' for proper formatting.\n                     IMPORTANT: Even if values (like HS Code) are the same for all items, repeat them for each item (e.g., "1234\n1234") to maintain row alignment.\n\n                   For \'PI\' (Proforma Invoice), valid keys are:\n                   - [ Date ], [ Proforma Invoice No ]\n                   - [ Seller Name ], [ Seller Department ], [ Seller Address ], [ Seller City ], [ Seller Country ], [ Seller Tel ]\n                   - [ Buyer Name ], [ Buyer Department ], [ Buyer Address ], [ Buyer City ], [ Buyer Country ], [ Buyer Tel ]\n                   - [ Number of Pieces ], [ Total Gross Weight ], [ Total Net Weight ], [ Carrier ]\n                   - [ Description of Goods ], [ Commodity Code ], [ Country of Origin ], [ Quantity ], [ Unit Value ], [ Subtotal Value ], [ Total Value ]\n                   - [ Term of Transportation ], [ Reason for Export ]\n                   \n                   * Note: For multiple items, use \'\\n\' (newline) to separate values. DO NOT use \'/\'.\n                   * IMPORTANT: Repeat values for EACH item (e.g., "Korea\\nKorea") to maintain table alignment.\n\n                   For \'Overseas_Distribution_Contract\', valid keys are:\n                   - [ Seller Name ], [ Buyer Name ], [ Seller Address ], [ Buyer Address ]\n                   - [ Contract Date ]\n                   - [ Item No ], [ Product Description ], [ Quantity ], [ Unit Price ], [ Amount ], [ Remarks ]\n                   - [ Time of Shipment ], [ Cancellation Date ], [ Port of Shipment ], [ Port of Destination ]\n                   - [ Delivery Terms ], [ Territory ]\n                   - [ Warranty Period ], [ Claim Period ], [ Claim Detail Period ]\n                   - [ Appendix Product ], [ Appendix Price ], [ Appendix Quantity ]\n                   - [ Marking ]\n                   \n                   * Note: For multiple items, combine them into a single string separated by \'\\n\' (newline).\n\n                   For \'Commercial_Invoice\', valid keys are:\n                   - [ Shipper Name ], [ Address ], [ City, Country ]\n                   - [ Invoice No. ], [ Date ], [ L/C No. ], [ Issuing Bank Name ]\n                   - [ Consignee Name ], [ Address ], [ City, Country ]\n                   - [ Notify Party Name ], [ Address ]\n                   - [ Port of Loading ], [ Final Destination ], [ Carrier Name ], [ Date ]\n                   - [ Marks ], [ Description ], [ EA/BOX ], [ Box ], [ Total EA ], [ Price ], [ Amount ], [ Total Amount ]\n\n                   For \'BL\' (Bill of Lading), valid keys are:\n                   - [ Shipper Name ], [ Shipper Address ]\n                   - [ B/L No ]\n                   - [ Consignee Name ], [ Consignee Address ]\n                   - [ Notify Party Name ], [ Notify Party Address ]\n                   - [ Pre-Carriage ], [ Place of Receipt ]\n                   - [ Ocean Vessel ], [ Voyage No ], [ Flag ]\n                   - [ Port of Loading ], [ Port of Discharge ], [ Place of Delivery ], [ Final Destination ]\n                   - [ Container No ], [ Seal No ], [ Marks and No ], [ No and Kinds of Packages ], [ Description of Goods ], [ Gross Weight ], [ Measurement ]\n                   - [ Total Containers ]\n\n                   For \'PL\' (Packing List), valid keys are:\n                   - [ Shipper Name ], [ Shipper Address ]\n                   - [ Invoice No ], [ Date ], [ L/C No ], [ L/C Date ]\n                   - [ Buyer Name ], [ Buyer Address ], [ Remarks ]\n                   - [ Notify Party Name ], [ Notify Party Address ]\n                   - [ Port of Loading ], [ Final Destination ], [ Carrier ], [ Sailing Date ]\n                   - [ Marks and Number ], [ Description of Goods ], [ Quantity ], [ Net Weight ], [ Gross Weight ], [ Measurement ]\n\n    Returns:\n        The filled HTML content as a string.', 'params_json_schema': {'properties': {'document_type': {'title': 'Document Type', 'type': 'string'}, 'data_json': {'title': 'Data Json', 'type': 'string'}, 'overwrite': {'default': False, 'title': 'Overwrite', 'type': 'boolean'}}, 'required': ['document_type', 'data_json', 'overwrite'], 'title': 'generate_trade_document_args', 'type': 'object', 'additionalProperties': False}, 'on_invoke_tool': <function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x11c4fade0>, 'strict_json_schema': True, 'is_enabled': True, 'tool_input_guardrails': None, 'tool_output_guardrails': None}
! using original object

1. Generating Offer Sheet with Seller Name...
Traceback (most recent call last):
  File "/Users/woojin/Desktop/무역_최신/SKN-17-Final-5Team/agent/tests/reproduce_issue.py", line 76, in <module>
    test_stateful_generation()
  File "/Users/woojin/Desktop/무역_최신/SKN-17-Final-5Team/agent/tests/reproduce_issue.py", line 38, in test_stateful_generation
    result1 = target_func("Offer_Sheet", data1)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'FunctionTool' object is not callable
